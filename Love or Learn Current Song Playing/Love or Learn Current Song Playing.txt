on getRepeatType() -- the return value is a string: Off/All/One	tell application "System Events"		tell process "iTunes"			set menuItems to menu items of menu bar 1's menu bar item "Controls"'s menu 1's menu item "Repeat"'s menu 1			set currentChoice to "unknown"			repeat with anItem in menuItems				try					set theResult to value of attribute "AXMenuItemMarkChar" of anItem					if theResult is not "" then						set currentChoice to name of anItem						exit repeat					end if				end try			end repeat		end tell	end tell	return currentChoiceend getRepeatTypeon setRepeatType(repeatType) -- repeatType is a string: Off/All/One	set currentValue to my getRepeatType()	ignoring case		if currentValue is not repeatType then			tell application "System Events" to tell process "iTunes"'s menu bar 1's menu bar item "Controls"'s menu 1's menu item "Repeat"'s menu 1				if repeatType is "all" then					perform action "AXPress" of menu item "All"				else if repeatType is "one" then					perform action "AXPress" of menu item "One"				else					perform action "AXPress" of menu item "Off"				end if			end tell		end if	end ignoringend setRepeatTypetell application "Finder"	set explanation to "Nice Song !	Press Love to repeat song	Press Learn to repeat and show guitar chords	Press Stop to go back to normal playback"		display dialog explanation buttons {"Love", "Learn", "Stop"} default button "Stop"		if result = {button returned:"Stop"} then		my setRepeatType("All")			else if result = {button returned:"Love"} then		my setRepeatType("One")			else		my setRepeatType("One")		tell application "iTunes"			set trackNameTemp to name of current track			set AppleScript's text item delimiters to " "			set as_list1 to every text item of trackNameTemp			set AppleScript's text item delimiters to "+"			set trackName to as_list1 as string						tell application "Safari"				tell window 1					set current tab to (make new tab with properties {URL:"http://www.ultimate-guitar.com/search.php?search_type=title&value=" & trackName & ""})					activate				end tell			end tell					end tell	end if	end tell